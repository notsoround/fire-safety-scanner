# AI PROMPT BACKUP - January 17, 2025 17:30

## Current Prompts Before Improvement

### System Prompt (Line 209-215 in server.py):
```
You are an NFPA-10â€“savvy fire safety expert analyzing images. If this is a fire extinguisher tag, 
analyze hole-punched dates, preferring the newest complete combo. If multiple days are punched, choose the lowest. 
If this is NOT a fire extinguisher tag, provide helpful observations about what you see instead. 
For non-extinguisher images, describe what it is (e.g., 'Safety notice', 'Equipment label', 'Not fire equipment'). 
Always respond with only the exact value requested (no prose). Use 'unknown' only if truly unreadable.
```

### Layer 1 - OCR (extract_raw_text):
```
Look at this fire extinguisher inspection tag and extract ALL visible text exactly as it appears. Include numbers, dates, punched holes, and any written text. Return only the raw text with no commentary.
```

### Layer 2a - Year Analysis (analyze_year):
```
This is a fire extinguisher inspection tag. Look for the most recent inspection year - this could be punched holes, handwritten numbers, or printed dates. The year should be between 2020-2025. From this text: '{raw_text}' and the image, what is the inspection YEAR? Respond with only the 4-digit year (e.g., 2024) or 'unknown' if not found.
```

### Layer 2b - Month Analysis (analyze_month):
```
This is a fire extinguisher inspection tag. Look for the most recent inspection month - this could be punched holes, handwritten numbers, or printed dates. From this text: '{raw_text}' and the image, what is the inspection MONTH? Respond with only the month number (1-12) or 'unknown' if not found.
```

### Layer 2c - Day Analysis (analyze_day):
```
This is a fire extinguisher inspection tag. Look for the most recent inspection day - this could be punched holes, handwritten numbers, or printed dates. From this text: '{raw_text}' and the image, what is the inspection DAY? Respond with only the day number (1-31) or 'unknown' if not found.
```

### Layer 3a - Extinguisher Type (analyze_extinguisher_type):
```
This is a fire extinguisher inspection tag. Look for the extinguisher type classification (like ABC, BC, CO2, Class A, Class B, Class C, Class K, Water, Foam, Dry Chemical, etc.). From this text: '{raw_text}' and the image, what is the extinguisher TYPE? IMPORTANT: Respond with ONLY the type classification (e.g., 'ABC', 'CO2', 'Dry Chemical') or 'unknown' if not found. Do not include explanations or reasoning - just the final answer.
```

### Layer 3b - Condition Assessment (analyze_condition):
```
This is a fire extinguisher inspection tag. Based on the inspection information, assess the overall condition. Look for any indicators of problems, maintenance needs, or good condition. From this text: '{raw_text}' and the image, what is the overall CONDITION? IMPORTANT: Respond with ONLY one word: 'Good', 'Fair', 'Poor', or 'unknown'. No explanations.
```

### Layer 3c - Company Information (analyze_company_info):
```
This is a fire extinguisher inspection tag. Look for the service company information including company name, address, phone number, and website. From this text: '{raw_text}' and the image, extract the COMPANY INFO. Respond with a JSON object like {'name': 'Company Name', 'address': 'Full Address', 'phone': 'Phone Number', 'website': 'Website'} or 'unknown' if not found.
```

### Layer 3d - Equipment Numbers (analyze_equipment_numbers):
```
This is a fire extinguisher inspection tag. Look for equipment identification numbers like AE#, HE#, EE#, FE# or similar asset/equipment numbers. From this text: '{raw_text}' and the image, extract the EQUIPMENT NUMBERS. Respond with a JSON object like {'ae_number': 'value', 'he_number': 'value', 'ee_number': 'value', 'fe_number': 'value'} or 'unknown' if not found.
```

### Layer 3e - Service Details (analyze_service_details):
```
This is a fire extinguisher inspection tag. Look for service type checkboxes or markings like ANNUAL INSP, SEMI ANNUAL INSP, QUARTERLY INSP, REPAIR, RECHARGE, NEW INSTALL, HYDRO, F/A, P/A, C/A, etc. From this text: '{raw_text}' and the image, extract the SERVICE DETAILS. Respond with a JSON object like {'service_type': 'Annual Inspection', 'additional_services': ['Recharge', 'Repair']} or 'unknown' if not found.
```

## Notes:
- Backed up before improvements based on March 6, 2025 tag analysis
- Issue: Prompts too simple for complex tag layouts with punch holes that cover text
- Need to add process of elimination and multiple orientation guidance
